/************************************************************************************
 * jquery.themepunch.essential.js - jQuery Plugin for esg Portfolio Slider
 * @version: 2.2.5 (12.07.2018)
 * @requires jQuery v1.7 or later
 * @author ThemePunch
************************************************************************************/

;var GridEditorEssentials=new function(){var r,p=this,g=null,y={},h={},j=[],f={},i=null,d=!1,l=[],o=[],u=[];p.initDraggable=function(){jQuery(".eg-draggable").draggable({handle:".dragme"})},p.setInitLayersJson=function(e){for(var t in y=jQuery.parseJSON(e))void 0===y[t].settings&&(y[t].settings={})},p.setInitElementsJson=function(e){for(var t in h=jQuery.parseJSON(e))void 0!==h[t].settings["font-family"]&&(h[t].settings["font-family"]=AdminEssentials.stripslashes(h[t].settings["font-family"]))},p.setInitFontsJson=function(e){o=jQuery.parseJSON(e)},p.refreshInitElements=function(e){for(var t in h=e)void 0!==h[t].settings["font-family"]&&(h[t].settings["font-family"]=AdminEssentials.stripslashes(h[t].settings["font-family"]))},p.setInitMetaKeysJson=function(e){u=jQuery.parseJSON(e)},p.setInitAllAttributesJson=function(e){f=jQuery.parseJSON(e)},p.update_layers=function(){if(null==g)return!1;null!=g.data("id")?p.update_layer_sorting():p.add_layer(),p.redraw_container_height()},p.add_layer=function(){new Date;if(null==g)return!1;var e=p.get_latest_id()+1;jQuery('input[name="eg-item-skin-element-last-id"]').val(e),g.data("id",e),g.attr("data-id",e);var t=new Object,n=g.data("handle");t.id=e.toString(),t.handle=g.data("handle"),t.settings=jQuery.extend({},h[g.data("handle")].settings),j.push(t),p.update_layer_sorting(),p.set_default_values(),p.select_layer(e.toString()),p.setting_has_changed(),p.propagate_element_selector(),j[j.length-1].handle=eg_lang.new_element_sanitize+"-"+e,g.data("handle",eg_lang.new_element_sanitize+"-"+e),g.attr("data-handle",g.data("handle")),g.data("orighandle",n),g.attr("orighandle",n)},p.update_layer_sorting=function(){var e=jQuery("#skin-dz-tl").sortable("toArray",{attribute:"data-id"}),t=jQuery("#skin-dz-br").sortable("toArray",{attribute:"data-id"}),n=jQuery("#skin-dz-c").sortable("toArray",{attribute:"data-id"}),a=jQuery("#skin-dz-m").sortable("toArray",{attribute:"data-id"});p.update_sorting(e,"tl"),p.update_sorting(t,"br"),p.update_sorting(n,"c"),p.update_sorting(a,"m")},p.update_sorting=function(e,t){var n=0;for(var a in e)for(var s in j)if(e[a]==j[s].id){j[s].order=n,j[s].container=t,n++;break}},p.set_default_values=function(e){for(var t in f){switch(f[t].type){case"colorpicker":"undefined"==typeof RevColor?(jQuery("#element-"+t).closest(".wp-picker-container").find("a").first().css("background-color",f[t].values.default),jQuery('input[name="element-'+t+'"]').val(f[t].values.default)):jQuery('input[name="element-'+t+'"]').val(f[t].values.default).tpColorPicker();break;case"select":jQuery('select[name="element-'+t+'"] option[value="'+f[t].values.default+'"]').attr("selected","selected"),"source"==t?(jQuery('select[name="element-source-post"] option[value="title"]').attr("selected","selected"),jQuery('select[name="element-source-event"] option[value="event_start_date"]').attr("selected","selected"),jQuery('select[name="element-source-woocommerce"] option[value="wc_regular_price_from"]').attr("selected","selected"),jQuery('input[name="element-source-icon"]').val(""),jQuery("#eg-preview-icon").html(""),jQuery('input[name="element-source-text-style-disable"]').attr("checked",!1),jQuery('textarea[name="element-source-text"]').val(""),jQuery('input[name="element-source-meta"]').val(""),jQuery('select[name="element-source-taxonomy"] option[value="post_tag"]').attr("selected","selected"),jQuery('select[name="element-source-event"]').hide().siblings(".select_fake").hide(),jQuery('select[name="element-source-woocommerce"]').hide().siblings(".select_fake").hide(),jQuery("#eg-source-icon-wrap").hide(),jQuery("#eg-source-text-style-disable-wrap").hide(),jQuery("#eg-source-text-wrap").hide(),jQuery("#eg-source-limit-wrap").hide(),jQuery(".esg-cat-tag-settings").hide(),jQuery("#eg-source-functonality-wrap").hide().find(".select_fake").hide(),jQuery("#eg-source-meta-wrap").hide()):"link-type"==t?(jQuery('input[name="element-url-link"]').val(""),jQuery('input[name="element-javascript-link"]').val(""),jQuery("#eg-element-post-url-wrap").hide(),jQuery("#eg-element-post-meta-wrap").hide(),jQuery("#eg-element-post-javascript-wrap").hide()):"background-size"==t?(jQuery('input[name="element-background-size-x"]').val("100"),jQuery('input[name="element-background-size-y"]').val("100"),jQuery("#background-size-percent-wrap").css("display","none")):"align"==t&&(jQuery('select[name="element-absolute-unit"] option[value="px"]').attr("selected","selected"),jQuery("#eg-t_b_align").text(eg_lang.top),jQuery("#eg-l_r_align").text(eg_lang.left));break;case"checkbox":jQuery('input[name="element-'+t+'"]').attr("checked",f[t].values.default);break;case"multi-text":jQuery('input[name="element-'+t+'[]"]').each(function(){jQuery(this).val(f[t].values.default)});break;default:jQuery('input[name="element-'+t+'"]').val(f[t].values.default)}0<jQuery('select[name="element-'+t+'-unit"]').length&&jQuery('select[name="element-'+t+'-unit"] option[value="px"]').attr("selected","selected")}if(void 0!==e&&"object"==typeof j[e]&&"undefined"!==j[e].handle){var n=j[e].settings;for(var t in f)if(void 0!==n[t]){switch(f[t].type){case"colorpicker":if("bg-alpha"==t)continue;"undefined"==typeof RevColor?(jQuery("#element-"+t).closest(".wp-picker-container").find("a").first().css("background-color",n[t]),jQuery('input[name="element-'+t+'"]').val(n[t])):jQuery('input[name="element-'+t+'"]').val(n[t]).tpColorPicker();break;case"select":if(jQuery('select[name="element-'+t+'"] option[value="'+n[t]+'"]').attr("selected","selected"),"source"==t){"post"==n[t]?void 0!==n["source-post"]&&(jQuery('select[name="element-source-post"] option[value="'+n["source-post"]+'"]').attr("selected","selected"),"cat_list"!=n["source-post"]&&"tag_list"!=n["source-post"]&&"taxonomy"!=n["source-post"]||(jQuery(".esg-cat-tag-settings").show(),jQuery("#eg-source-limit-wrap").hide(),jQuery("#eg-source-functonality-wrap").show().find(".select_fake").show()),"meta"==n["source-post"]&&(jQuery("#eg-source-meta-wrap").show(),void 0!==n["source-meta"]&&jQuery('input[name="element-source-meta"]').val(n["source-meta"]))):"event"==n[t]?void 0!==n["source-event"]&&jQuery('select[name="element-source-event"] option[value="'+n["source-event"]+'"]').attr("selected","selected"):"woocommerce"==n[t]?void 0!==n["source-woocommerce"]&&(jQuery('select[name="element-source-woocommerce"] option[value="'+n["source-woocommerce"]+'"]').attr("selected","selected"),"wc_categories"==n["source-woocommerce"]&&(jQuery(".esg-cat-tag-settings").show(),jQuery("#eg-source-limit-wrap").show(),jQuery("#eg-source-functonality-wrap").show().find(".select_fake").show())):"icon"==n[t]?void 0!==n["source-icon"]&&(jQuery('input[name="element-source-icon"]').val(n["source-icon"]),jQuery("#eg-preview-icon").html('<i class="'+n["source-icon"]+'"></i>')):"text"==n[t]&&void 0!==n["source-text"]&&jQuery('textarea[name="element-source-text"]').val(n["source-text"])}else if("link-type"==t)void 0!==n["link-type-url"]&&jQuery('input[name="element-url-link"]').val(n["link-type-url"]),void 0!==n["link-type-meta"]&&jQuery('input[name="element-meta-link"]').val(n["link-type-meta"]),void 0!==n["link-type-javascript"]&&jQuery('input[name="element-javascript-link"]').val(n["link-type-javascript"]),void 0!==n["link-type-sharefacebook"]&&(jQuery('select[name="element-facebook-sharing-link"]').val(n["link-type-sharefacebook"]),jQuery('input[name="element-facebook-link-url"]').val(n["element-facebook-link-url"])),void 0!==n["link-type-sharegplus"]&&(jQuery('select[name="element-gplus-sharing-link"]').val(n["link-type-sharegplus"]),jQuery('input[name="element-gplus-link-url"]').val(n["element-gplus-link-url"])),void 0!==n["link-type-sharepinterest"]&&(jQuery('select[name="element-pinterest-sharing-link"]').val(n["link-type-sharepinterest"]),jQuery('input[name="element-pinterest-link-url"]').val(n["element-pinterest-link-url"]),jQuery('textarea[name="element-pinterest-description"]').val(n["link-type-sharepinterest-description"])),void 0!==n["link-type-sharetwitter"]&&(jQuery('select[name="element-twitter-sharing-link"]').val(n["link-type-sharetwitter"]),jQuery('input[name="element-twitter-link-url"]').val(n["element-twitter-link-url"]),jQuery('input[name="element-twitter-text-before"]').val(n["link-type-sharetwitter-text-before"]),jQuery('input[name="element-twitter-text-after"]').val(n["link-type-sharetwitter-text-after"]));else if("text-align"==t||"float"==t)"block"==jQuery('input[name="element-display"]').val()?"float"==t&&jQuery('select[name="element-'+t+'"] option[value="none"]').attr("selected","selected"):"text-align"==t&&jQuery('select[name="element-'+t+'"] option[value="center"]').attr("selected","selected");else if("background-size"==t)void 0!==n["background-size-x"]&&jQuery('input[name="element-background-size-x"]').val(n["background-size-x"]),void 0!==n["background-size-y"]&&jQuery('input[name="element-background-size-y"]').val(n["background-size-y"]),"%"==n["background-size"]&&jQuery("#background-size-percent-wrap").css("display","inline-block");else if("align"==t&&(void 0!==n["absolute-unit"]&&jQuery('select[name="element-absolute-unit"] option[value="'+n["absolute-unit"]+'"]').attr("selected","selected"),void 0!==n.align))switch(n.align){case"t_l":jQuery("#eg-t_b_align").text(eg_lang.top),jQuery("#eg-l_r_align").text(eg_lang.left);break;case"t_r":jQuery("#eg-t_b_align").text(eg_lang.top),jQuery("#eg-l_r_align").text(eg_lang.right);break;case"b_l":jQuery("#eg-t_b_align").text(eg_lang.bottom),jQuery("#eg-l_r_align").text(eg_lang.left);break;case"b_r":jQuery("#eg-t_b_align").text(eg_lang.bottom),jQuery("#eg-l_r_align").text(eg_lang.right)}break;case"checkbox":n[t]==jQuery('input[name="element-'+t+'"]').val()?jQuery('input[name="element-'+t+'"]').attr("checked",!0):jQuery('input[name="element-'+t+'"]').attr("checked",!1);break;case"multi-text":var a=0;jQuery('input[name="element-'+t+'[]"]').each(function(){jQuery(this).val(n[t][a]),a++});break;default:jQuery('input[name="element-'+t+'"]').val(n[t])}0<jQuery('select[name="element-'+t+'-unit"]').length&&jQuery('select[name="element-'+t+'-unit"] option[value="'+n[t+"-unit"]+'"]').attr("selected","selected")}}jQuery('select[name="element-facebook-sharing-link"]').change(function(){"custom"==jQuery('select[name="element-facebook-sharing-link"]').val()?jQuery(".eg-element-facebook_link_custom").show():jQuery(".eg-element-facebook_link_custom").hide()}),jQuery('select[name="element-gplus-sharing-link"]').change(function(){"custom"==jQuery('select[name="element-gplus-sharing-link"]').val()?jQuery(".eg-element-gplus_link_custom").show():jQuery(".eg-element-gplus_link_custom").hide()}),jQuery('select[name="element-pinterest-sharing-link"]').change(function(){"custom"==jQuery('select[name="element-pinterest-sharing-link"]').val()?jQuery(".eg-element-pinterest_link_custom").show():jQuery(".eg-element-pinterest_link_custom").hide()}),jQuery('select[name="element-twitter-sharing-link"]').change(function(){"custom"==jQuery('select[name="element-twitter-sharing-link"]').val()?jQuery(".eg-element-twitter_link_custom").show():jQuery(".eg-element-twitter_link_custom").hide()})},p.reset_style_by_position=function(){if("absolute"==jQuery('select[name="element-position"] option:selected').val())jQuery("#eg-show-on-absolute").css("display","block"),jQuery("#eg-show-on-relative").css("display","none"),g.hasClass("ui-draggable")||(jQuery(g).appendTo("#skin-dz-wrapper"),p.set_absolute_positioning());else{var e=g.data("id");for(var t in j)if(j[t].id==e){g.hasClass("ui-draggable")&&(g.appendTo("#skin-dz-"+j[t].container),g.removeClass("ui-draggable"),g.css("top","auto"),g.css("right","auto"),g.css("bottom","auto"),g.css("left","auto"),g.draggable("destroy"),p.update_layer_sorting());break}jQuery("#eg-show-on-absolute").css("display","none"),jQuery("#eg-show-on-relative").css("display","block")}},p.get_setting_values=function(){if(null==g)return!1;var e=g.data("id");for(var t in p.reset_style_by_position(),j)if(j[t].id==e){for(var n in f){var a=j[t].settings[n];if("checkbox"==f[n].type)j[t].settings[n]=jQuery('input[name="element-'+n+'"]').is(":checked")?jQuery('input[name="element-'+n+'"]').val():"";else if("select"==f[n].type)if(j[t].settings[n]=jQuery('select[name="element-'+n+'"] option:selected').val(),"source"==n)switch(delete j[t].settings["source-event"],delete j[t].settings["source-woocommerce"],delete j[t].settings["source-icon"],delete j[t].settings["source-text"],delete j[t].settings["source-post"],delete j[t].settings["source-meta"],j[t].settings[n]){case"event":j[t].settings["source-event"]=jQuery('select[name="element-source-event"] option:selected').val();break;case"woocommerce":j[t].settings["source-woocommerce"]=jQuery('select[name="element-source-woocommerce"] option:selected').val();break;case"icon":j[t].settings["source-icon"]=jQuery('input[name="element-source-icon"]').val();break;case"text":j[t].settings["source-text"]=jQuery('textarea[name="element-source-text"]').val();break;case"post":default:j[t].settings["source-taxonomy"]=jQuery('select[name="element-source-taxonomy"] option:selected').val(),j[t].settings["source-post"]=jQuery('select[name="element-source-post"] option:selected').val(),"meta"==j[t].settings["source-post"]&&(j[t].settings["source-meta"]=jQuery('input[name="element-source-meta"]').val())}else if("link-type"==n)switch(delete j[t].settings["link-type-url"],delete j[t].settings["link-type-meta"],delete j[t].settings["link-type-javascript"],delete j[t].settings["link-type-sharefacebook"],delete j[t].settings["link-type-sharegplus"],delete j[t].settings["link-type-sharepinterest"],delete j[t].settings["link-type-sharetwitter"],j[t].settings[n]){case"post":case"lightbox":case"embedded_media":break;case"url":j[t].settings["link-type-url"]=jQuery('input[name="element-url-link"]').val();break;case"meta":j[t].settings["link-type-meta"]=jQuery('input[name="element-meta-link"]').val();break;case"javascript":j[t].settings["link-type-javascript"]=jQuery('input[name="element-javascript-link"]').val();break;case"sharefacebook":j[t].settings["link-type-sharefacebook"]=jQuery('select[name="element-facebook-sharing-link"]').val(),j[t].settings["link-type-sharefacebook-custom-url"]=jQuery('input[name="element-facebook-link-url"]').val();break;case"sharegplus":j[t].settings["link-type-sharegplus"]=jQuery('select[name="element-gplus-sharing-link"]').val(),j[t].settings["link-type-sharegplus-custom-url"]=jQuery('input[name="element-gplus-link-url"]').val();break;case"sharepinterest":j[t].settings["link-type-sharepinterest"]=jQuery('select[name="element-pinterest-sharing-link"]').val(),j[t].settings["link-type-sharepinterest-custom-url"]=jQuery('input[name="element-pinterest-link-url"]').val(),j[t].settings["link-type-sharepinterest-description"]=jQuery('textarea[name="element-pinterest-description"]').val();break;case"sharetwitter":j[t].settings["link-type-sharetwitter"]=jQuery('select[name="element-twitter-sharing-link"]').val(),j[t].settings["link-type-sharetwitter-custom-url"]=jQuery('input[name="element-twitter-link-url"]').val(),j[t].settings["link-type-sharetwitter-text-before"]=jQuery('input[name="element-twitter-text-before"]').val(),j[t].settings["link-type-sharetwitter-text-after"]=jQuery('input[name="element-twitter-text-after"]').val()}else"background-size"==n?(delete j[t].settings["background-size-x"],delete j[t].settings["background-size-y"],"%"==j[t].settings[n]&&(j[t].settings["background-size-x"]=jQuery('input[name="element-background-size-x"]').val(),j[t].settings["background-size-y"]=jQuery('input[name="element-background-size-y"]').val())):"align"==n&&(j[t].settings["absolute-unit"]=jQuery('select[name="element-absolute-unit"] option:selected').val());else if("multi-text"==f[n].type){var s={},r=0;jQuery('input[name="element-'+n+'[]"]').each(function(){s[r]=jQuery(this).val(),r++}),j[t].settings[n]=s}else j[t].settings[n]=jQuery('input[name="element-'+n+'"]').val();if(0<jQuery('select[name="element-'+n+'-unit"]').length&&(j[t].settings[n+"-unit"]=jQuery('select[name="element-'+n+'-unit"] option:selected').val()),a!==j[t].settings[n]&&void 0!==a)if("multi-text"==f[n].type){var i="",l="",o=!0,u=!0;for(var c in j[t].settings[n])o||(i+=","),i+=j[t].settings[n][c],o=!1;for(var c in a)u||(l+=","),l+=a[c],u=!1;l!=i&&(d=!0)}else d=!0;"transition"==n&&p.check_no_transition(j[t].settings[n])}break}},p.set_setting_values=function(){if(null==g)return!1;var e=g.data("id");for(var t in j)if(j[t].id==e){for(var n in f)if(void 0!==j[t].settings&&void 0!==j[t].settings[n]){if("checkbox"==f[n].type)j[t].settings[n]==jQuery('input[name="element-'+n+'"]').val()||"true"==j[t].settings[n]&&"on"==jQuery('input[name="element-'+n+'"]').val()?jQuery('input[name="element-'+n+'"]').attr("checked",!0):jQuery('input[name="element-'+n+'"]').attr("checked",!1);else if("colorpicker"==f[n].type)"undefined"==typeof RevColor?(jQuery('input[name="element-'+n+'"]').val(j[t].settings[n]),jQuery("#element-"+n).closest(".wp-picker-container").find("a").first().css("background-color",jQuery('input[name="element-'+n+'"]').val())):jQuery('input[name="element-'+n+'"]').val(j[t].settings[n]).tpColorPicker();else if("slider"==f[n].type||"text-slider"==f[n].type)jQuery('input[name="element-'+n+'"]').val(j[t].settings[n]),jQuery("#element-"+n).slider({value:jQuery('input[name="element-'+n+'"]').val()}),jQuery("body").trigger("esgslide",jQuery("#element-"+n));else if("select"==f[n].type)if(jQuery('select[name="element-'+n+'"] option[value="'+j[t].settings[n]+'"]').attr("selected","selected"),"source"==n)switch(jQuery(".elements-select-wrap").hide(),j[t].settings[n]){case"event":jQuery("#eg-source-limit-wrap").show(),jQuery('select[name="element-source-event"]').show().siblings(".select_fake").show(),jQuery('select[name="element-source-event"] option[value="'+j[t].settings["source-event"]+'"]').attr("selected","selected");break;case"woocommerce":jQuery("#eg-source-limit-wrap").show(),jQuery('select[name="element-source-woocommerce"]').show().siblings(".select_fake").show(),jQuery('select[name="element-source-woocommerce"] option[value="'+j[t].settings["source-woocommerce"]+'"]').attr("selected","selected");break;case"icon":jQuery("#eg-source-icon-wrap").show(),jQuery('input[name="element-source-icon"]').val(j[t].settings["source-icon"]),jQuery("#eg-preview-icon").html('<i class="'+j[t].settings["source-icon"]+'"></i>');break;case"text":void 0!==typeof j[t].settings.special&&"true"==j[t].settings.special&&void 0!==typeof j[t].settings["special-type"]&&"blank-element"==j[t].settings["special-type"]?jQuery("#eg-source-text-style-disable-wrap").hide():jQuery("#eg-source-text-style-disable-wrap").show(),jQuery("#eg-source-text-wrap").show(),jQuery('textarea[name="element-source-text"]').val(j[t].settings["source-text"]);break;case"post":default:jQuery("#eg-source-limit-wrap").show(),jQuery('select[name="element-source-post"]').show().siblings(".select_fake").show(),"source-taxonomy"in j[t].settings&&jQuery('select[name="element-source-taxonomy"] option[value="'+j[t].settings["source-taxonomy"]+'"]').attr("selected","selected"),jQuery('select[name="element-source-post"] option[value="'+j[t].settings["source-post"]+'"]').attr("selected","selected"),"meta"==j[t].settings["source-post"]&&jQuery('input[name="element-source-meta"]').val(j[t].settings["source-meta"])}else if("link-type"==n)switch(jQuery("#eg-element-post-url-wrap").hide(),jQuery("#eg-element-post-meta-wrap").hide(),jQuery("#eg-element-post-javascript-wrap").hide(),jQuery("#eg-element-link-details-wrap").show(),jQuery("#eg-element-facebook-wrap").hide(),jQuery("#eg-element-gplus-wrap").hide(),jQuery("#eg-element-pinterest-wrap").hide(),jQuery("#eg-element-twitter-wrap").hide(),j[t].settings[n]){case"post":case"lightbox":case"embedded_media":break;case"url":jQuery("#eg-element-post-url-wrap").show(),jQuery('input[name="element-url-link"]').val(j[t].settings["link-type-url"]);break;case"meta":jQuery("#eg-element-post-meta-wrap").show(),jQuery('input[name="element-meta-link"]').val(j[t].settings["link-type-meta"]);break;case"javascript":jQuery("#eg-element-post-javascript-wrap").show(),jQuery('input[name="element-javascript-link"]').val(j[t].settings["link-type-javascript"]);break;case"sharefacebook":jQuery("#eg-element-link-details-wrap").hide(),jQuery("#eg-element-facebook-wrap").show(),jQuery('select[name="element-facebook-sharing-link"]').val(j[t].settings["link-type-sharefacebook"]),jQuery('input[name="element-facebook-link-url"]').val(j[t].settings["link-type-sharefacebook-custom-url"]),"custom"==jQuery('select[name="element-facebook-sharing-link"]').val()?jQuery(".eg-element-facebook_link_custom").show():jQuery(".eg-element-facebook_link_custom").hide();break;case"sharegplus":jQuery("#eg-element-link-details-wrap").hide(),jQuery("#eg-element-gplus-wrap").show(),jQuery('select[name="element-gplus-sharing-link"]').val(j[t].settings["link-type-sharegplus"]),jQuery('input[name="element-gplus-link-url"]').val(j[t].settings["link-type-sharegplus-custom-url"]),"custom"==jQuery('select[name="element-gplus-sharing-link"]').val()?jQuery(".eg-element-gplus_link_custom").show():jQuery(".eg-element-gplus_link_custom").hide();break;case"sharepinterest":jQuery("#eg-element-link-details-wrap").hide(),jQuery("#eg-element-pinterest-wrap").show(),jQuery('select[name="element-pinterest-sharing-link"]').val(j[t].settings["link-type-sharepinterest"]),jQuery('input[name="element-pinterest-link-url"]').val(j[t].settings["link-type-sharepinterest-custom-url"]),jQuery('textarea[name="element-pinterest-description"]').val(j[t].settings["link-type-sharepinterest-description"]),"custom"==jQuery('select[name="element-pinterest-sharing-link"]').val()?jQuery(".eg-element-pinterest_link_custom").show():jQuery(".eg-element-pinterest_link_custom").hide();break;case"sharetwitter":jQuery("#eg-element-link-details-wrap").hide(),jQuery("#eg-element-twitter-wrap").show(),jQuery('select[name="element-twitter-sharing-link"]').val(j[t].settings["link-type-sharetwitter"]),jQuery('input[name="element-twitter-link-url"]').val(j[t].settings["link-type-sharetwitter-custom-url"]),jQuery('input[name="element-twitter-text-before"]').val(j[t].settings["link-type-sharetwitter-text-before"]),jQuery('input[name="element-twitter-text-after"]').val(j[t].settings["link-type-sharetwitter-text-after"]),"custom"==jQuery('select[name="element-twitter-sharing-link"]').val()?jQuery(".eg-element-twitter_link_custom").show():jQuery(".eg-element-twitter_link_custom").hide()}else if("display"==n)switch(jQuery("#element-text-align-wrap").hide(),jQuery("#element-float-wrap").hide(),j[t].settings[n]){case"block":jQuery("#element-text-align-wrap").show();break;case"inline-block":jQuery("#element-float-wrap").show()}else"background-size"==n?"%"==j[t][n]&&(jQuery("#background-size-percent-wrap").css("display","inline-block"),jQuery('input[name="element-background-size-x"]').val(j[t].settings["background-size-x"]),jQuery('input[name="element-background-size-y"]').val(j[t].settings["background-size-y"])):"align"==n&&jQuery('select[name="element-absolute-unit"] option[value="'+j[t].settings["absolute-unit"]+'"]').attr("selected","selected");else if("multi-text"==f[n].type){var a=0;jQuery('input[name="element-'+n+'[]"]').each(function(){jQuery(this).val(j[t].settings[n][a]),a++})}else jQuery('input[name="element-'+n+'"]').val(j[t].settings[n]);0<jQuery('select[name="element-'+n+'-unit"]').length&&jQuery('select[name="element-'+n+'-unit"] option[value="'+j[t].settings[n+"-unit"]+'"]').attr("selected","selected")}break}},p.set_setting_styles=function(){if(null==g)return!1;var e=g.data("id");for(var t in j)if(j[t].id==e){p.set_inline_styles(g,j[t].settings),found=!0;break}},p.set_inline_styles=function(e,t,n){var a=jQuery("#eg-inline-style-wrapper");if("eg-line-break"==e.data("handle")||"eg-blank-element"==e.data("handle"))return!0;var s=[],r=[];if("text"==t.source&&void 0!==t["source-text-style-disable"]&&"on"==t["source-text-style-disable"]);else{var i="",l=!1;for(var o in"true"==t["force-important"]&&(i=" !important"),"on"==t["enable-hover"]&&(l=!0),f){if(void 0!==n){if("margin"==o)continue;if("position"==o)continue}var u=f[o].style;if("hover"==u)switch(o){case"display":case"text-align":case"float":case"clear":case"margin":case"padding":break;default:if(f[o].style!=u)continue}if(("idle"==f[o].style||"hover"==f[o].style)&&((l||"hover"!=f[o].style)&&void 0!==t[o])){var c="idle"==u?o:o.replace("-hover","");if("multi-text"==f[o].type){void 0===t[o+"-unit"]&&(t[o+"-unit"]="px");var d=t[o+"-unit"];if("border-radius"==c)"idle"==u?(s.push("border-top-left-radius: "+t[o][0]+d+i+";"),s.push("border-top-right-radius: "+t[o][1]+d+i+";"),s.push("border-bottom-right-radius: "+t[o][2]+d+i+";"),s.push("border-bottom-left-radius: "+t[o][3]+d+i+";")):(r.push("border-top-left-radius: "+t[o][0]+d+i+";"),r.push("border-top-right-radius: "+t[o][1]+d+i+";"),r.push("border-bottom-right-radius: "+t[o][2]+d+i+";"),r.push("border-bottom-left-radius: "+t[o][3]+d+i+";"));else if("border"==c)"idle"==u?(s.push("border-top: "+t[o][0]+d+i+";"),s.push("border-right: "+t[o][1]+d+i+";"),s.push("border-bottom: "+t[o][2]+d+i+";"),s.push("border-left: "+t[o][3]+d+i+";")):(r.push("border-top: "+t[o][0]+d+i+";"),r.push("border-right: "+t[o][1]+d+i+";"),r.push("border-bottom: "+t[o][2]+d+i+";"),r.push("border-left: "+t[o][3]+d+i+";"));else if("box-shadow"==c||"background-color"==c){var m="";for(var p in t[o])m+=t[o][p]+d+" ";m+=" "+("idle"==u?t["shadow-color"]:t["shadow-color-hover"]),"idle"==u?(s.push("-moz-"+c+": "+m+i+";"),s.push("-webkit-"+c+": "+m+i+";"),s.push(c+": "+m+i+";")):(r.push("-moz-"+c+": "+m+i+";"),r.push("-webkit-"+c+": "+m+i+";"),r.push(c+": "+m+i+";"))}else{m="";for(var p in t[o])m+=t[o][p]+d+" ";"idle"==u?s.push(c+": "+m+i+";"):r.push(c+": "+m+i+";")}}else if("background-color"==c){var g=t[o];"undefined"!=typeof RevColor&&(g=RevColor.get(g)),"idle"==u?s.push("background: "+g+i+";"):r.push("background: "+g+i+";")}else{if("border"==c&&("idle"==u?s.push("border-style: solid"+i+";"):r.push("border-style: solid"+i+";")),"font-style"==c&&"true"==t[o]&&(t[o]="italic"+i+";"),null==(d=f[o].unit)&&(d=""),""==t[o])continue;if("idle"==u){if("display"==c?s.push(c+": "+t[o]+d+" !important;"):s.push(c+": "+t[o]+d+i+";"),"position"==c&&"absolute"==t[o]){s.push("height: auto"+i+";"),s.push("width: auto"+i+";"),s.push("white-space: nowrap"+i+";");var y="NaN"==t["left-right"]?0:t["left-right"],h="NaN"==t["top-bottom"]?0:t["top-bottom"];switch(t.align){case"t_l":s.push("top: "+h+t["absolute-unit"]+";"),s.push("left: "+y+t["absolute-unit"]+";"),s.push("bottom:auto;"),s.push("right:auto;");break;case"t_r":s.push("top: "+h+t["absolute-unit"]+";"),s.push("right: "+y+t["absolute-unit"]+";"),s.push("bottom:auto;"),s.push("left:auto;");break;case"b_l":s.push("bottom: "+h+t["absolute-unit"]+";"),s.push("left: "+y+t["absolute-unit"]+";"),s.push("top:auto;"),s.push("right:auto;");break;case"b_r":s.push("bottom: "+h+t["absolute-unit"]+";"),s.push("right: "+y+t["absolute-unit"]+";"),s.push("top:auto;"),s.push("left:auto;")}}}else r.push(c+": "+t[o]+d+i+";")}}}}var j='<style type="text/css" id="eg-element-style-'+e.data("handle")+'">\n';if(0<s.length){for(var Q in j+='.skin-dz-elements[data-handle="'+e.data("handle")+'"] {\n',s)j+=s[Q]+"\n";j+="}\n"}if(0<r.length){for(var v in j+='.skin-dz-elements[data-handle="'+e.data("handle")+'"]:hover {\n',r)j+=r[v]+"\n";j+="}\n"}j+="</style>\n",0<jQuery("#eg-element-style-"+e.data("handle")).length&&jQuery("#eg-element-style-"+e.data("handle")).remove(),a.append(j)},p.set_global_inline_styles=function(){var e=jQuery("#eg-inline-style-wrapper");0<jQuery("#eg-global-inline-styles").length&&jQuery("#eg-global-inline-styles").remove(),html='<style type="text/css" id="eg-global-inline-styles">\n',html+=i.getValue(),html+="</style>\n",d=!0,e.append(html)},p.set_setting_attributes=function(){if(null==g)return!1;var e=g.data("id");for(var t in j)if(j[t].id==e)for(var n in f)if("attribute"===f[n].style)if("delay"==n){var a=j[t].settings[n];0<a&&(a/=100),g.data("delay",a)}else if("transition"==n){var s=g.attr("class").split(" ");for(var r in s)-1!==s[r].indexOf("esg-")&&g.removeClass(s[r]);void 0===j[t].settings["transition-type"]&&(j[t].settings["transition-type"]=""),g.addClass("esg-"+j[t].settings[n]+j[t].settings["transition-type"])}},p.set_setting_caption=function(){if(null==g)return!1;var e=g.data("id"),t="";for(var n in j)if(j[n].id==e){if(void 0!==typeof j[n].settings.special&&"true"==j[n].settings.special&&void 0!==typeof j[n].settings["special-type"]&&"blank-element"==j[n].settings["special-type"])return g.html("&nbsp;"),!0;switch(j[n].settings.source){case"icon":if(void 0!==j[n].settings["source-icon"])t='<i class="'+j[n].settings["source-icon"]+'"></i>';break;case"text":if(void 0!==j[n].settings["source-text"])t=j[n].settings["source-text"];break;case"event":if(void 0!==j[n].settings["source-event"])t=j[n].settings["source-event"];break;case"woocommerce":if(void 0!==j[n].settings["source-woocommerce"])t=j[n].settings["source-woocommerce"];break;case"post":default:if(void 0!==j[n].settings["source-post"])t=j[n].settings["source-post"]}if("post"==j[n].settings.source||"event"==j[n].settings.source||"woocommerce"==j[n].settings.source)switch(""==t&&(t="title",j[n].settings.source="post"),t){case"wc_full_price":t=eg_lang.full_price;break;case"wc_price":t=eg_lang.regular_price;break;case"wc_price_no_cur":t=eg_lang.regular_price_no_cur;break;default:t=jQuery('select[name="element-source-'+j[n].settings.source+'"] option[value="'+t+'"]').text()}g.html(t);break}},p.propagate_layer_styles=function(e,t){if(void 0===h[e])return!1;for(var n in h[e].settings)j[t].settings[n]=h[e].settings[n]},p.propagate_element_selector=function(){for(var e in jQuery("#element-settings-current-name").html(""),j){var t="";switch(j[e].settings.source){case"icon":t=j[e].settings["source-icon"];break;case"post":t=jQuery('select[name="element-source-post"] option[value="'+j[e].settings["source-post"]+'"]').text();break;case"event":t=jQuery('select[name="element-source-event"] option[value="'+j[e].settings["source-event"]+'"]').text();break;case"woocommerce":t=jQuery('select[name="element-source-woocommerce"] option[value="'+j[e].settings["source-woocommerce"]+'"]').text();break;case"text":t=j[e].settings["source-text"].replace(/(<([^>]+)>)/gi,"")}jQuery("#element-settings-current-name").append(jQuery("<option>",{value:j[e].id,text:t}))}if(jQuery("#element-settings-current-name option").each(function(){jQuery(this).removeAttr("selected")}),null!==g){jQuery('#element-settings-current-name option[value="'+g.data("id")+'"]').attr("selected","selected"),jQuery("#element-settings-current-name").parent().show();var n="text"==jQuery('select[name="element-source"] option:selected').val()&&"checked"==jQuery('input[name="element-source-text-style-disable"]').attr("checked")?"-nostyle":"";jQuery(".eg-element-class-setter").text(eg_lang.class_name+" .eg-"+jQuery("#eg-item-skin-slug").text()+n+"-element-"+g.data("id"))}else jQuery(".eg-element-class-setter").text("");var a=!0;for(var s in j)if(null!=j[s]){a=!1;break}a&&jQuery("#element-settings-current-name").parent().hide(),AdminEssentials.presetSelects()},p.propagate_default_element_styles=function(){for(var e in h)if(void 0!==h[e].settings){var t=jQuery('.mainul .skin-dz-elements[data-handle="'+e+'"]');jQuery.isEmptyObject(t)||t.each(function(){p.set_inline_styles(jQuery(this),h[e].settings,!0)})}r.esreinit(),p.set_default_elements_draggable()},p.select_layer=function(n){jQuery("#eg-dz-hover-wrap .skin-dz-elements").removeClass("selected"),jQuery(".skin-dz-elements").each(function(e){var t=jQuery(this);if(null!=t&&null!=t.data("id")&&t.data("id").toString()===n.toString())return g=t,!0});var e=document.getElementById("always-visible-options");if(e){var t=g.closest("#skin-dz-m-wrap").length?"none":"block";e.style.display=t}g.addClass("selected"),p.set_default_values(n),p.set_setting_values(),p.show_toolbar(),p.select_element_editor_name(),jQuery('select[name="element-source"]').change()},p.delete_layer=function(e){jQuery("#eg-dz-hover-wrap .skin-dz-elements").removeClass("selected"),"object"!=typeof e&&(e=jQuery('.skin-dz-elements[data-id="'+e+'"]'));var t=e.data("id");for(var n in e.remove(),j)if(j[n].id==t){delete j[n];break}g=null;if(0<j.length)for(var n in j)if(null!=typeof j[n].id){p.select_layer(j[n].id);break}null==g&&p.show_empty_toolbar(),p.change_bg_color(),p.propagate_element_selector(),p.redraw_container_height(),AdminEssentials.adjustDropHeights()},p.show_toolbar=function(){if(null==g)return!1;var e=!1;for(var t in jQuery("#settings-dz-elements-wrapper").show(),jQuery(".eg-hide-on-special").show(),jQuery("#element-save-as-button").show(),j)if(j[t].handle==g.data("handle")){if(void 0!==typeof j[t].settings.special&&"true"==j[t].settings.special){if(void 0!==typeof j[t].settings["special-type"])switch(j[t].settings["special-type"]){case"blank-element":jQuery(".eg-hide-on-blank-element").hide(),jQuery("#element-save-as-button").hide(),jQuery(".eg-source-li>a").click();break;case"line-break":default:jQuery("#settings-dz-elements-wrapper").hide(),jQuery("#element-save-as-button").hide()}}else jQuery("#settings-dz-elements-wrapper").show(),jQuery(".eg-hide-on-special").show(),jQuery("#element-save-as-button").show();p.hide_empty_toolbar(),e=!0;break}e||p.show_empty_toolbar()},p.show_empty_toolbar=function(){jQuery("#element-setting-wrap-alternative").css("display","block"),jQuery("#element-setting-wrap-top").css("display","none")},p.hide_empty_toolbar=function(){jQuery("#element-setting-wrap-alternative").css("display","none"),jQuery("#element-setting-wrap-top").css("display","block")},p.select_element_editor_name=function(){if(null==g)return!1;var e=g.data("id");jQuery("#element-settings-current-name option").each(function(){jQuery(this).removeAttr("selected")}),jQuery('#element-settings-current-name option[value="'+e+'"]').attr("selected","selected"),AdminEssentials.presetSelects()},p.get_latest_id=function(){var e=-1;for(var t in j)parseInt(j[t].id)>e&&(e=parseInt(j[t].id));return parseInt(jQuery('input[name="eg-item-skin-element-last-id"]').val())>parseInt(e)&&(e=jQuery('input[name="eg-item-skin-element-last-id"]').val()),parseInt(e)},p.output_setting_data=function(){var e=[];for(var t in j)""!=j[t]&&(null==j[t].order&&(j[t].order="0"),e[t]={},e[t].id=j[t].id,e[t].order=j[t].order,e[t].container=j[t].container,e[t].settings=j[t].settings);return e},p.create_elements_by_data=function(e){var t=0,n=[];if(void 0===e&&(e=y),null==e)return!1;for(var a in e)""!=e[a]&&(null==e[a].order&&(e[a].order="0"),null==e[a].container&&(e[a].container="c"),n[a]=jQuery.extend({},e[a]));for(var a in jQuery.isEmptyObject(n)||n.sort(p.sortByOrder),n){var s=!1;for(var r in h)if(r==n[a].handle){s=r;break}if(!1!==s)var i=n[a].handle,l=h[s].name;else{i=eg_lang.new_element_sanitize+"-"+t,l=eg_lang.new_element+" "+t;for(var o in y)y[o].id==n[a].id&&y[o].handle==n[a].handle&&(y[o].handle=i);n[a].handle=i,t++}var u=n[a].id,c="";if(void 0!==typeof n[a].settings.special&&"true"==n[a].settings.special)if(void 0!==typeof n[a].settings["special-type"])switch(n[a].settings["special-type"]){case"blank-element":c=" eg-special-blank-element";break;case"line-break":default:c=" eg-special-element"}else c=" eg-special-element";var d='<div class="skin-dz-elements'+c+'" data-id="'+u+'" data-handle="'+i+'">'+l+"</div>";jQuery("#skin-dz-"+n[a].container).append(d)}for(var m in j=n)g=jQuery('.skin-dz-elements[data-id="'+j[m].id+'"]'),p.set_setting_styles(),p.set_setting_caption(),p.set_setting_attributes(),void 0!==j[m].settings.position&&"absolute"==j[m].settings.position&&(jQuery(g).appendTo("#skin-dz-wrapper"),p.set_absolute_positioning());p.propagate_element_selector(),g=null,p.change_bg_color(),p.selet_first_layer(),p.redraw_container_height()},p.selet_first_layer=function(){var e=!1;for(var t in j)if(null!=j[t]){p.select_layer(j[t].id),e=!0;break}e||p.show_empty_toolbar()},p.add_animation_classes=function(){var e=jQuery("#skin-dz-c-wrap .eg-element-cover"),t=jQuery("#skin-dz-tl-wrap .eg-element-cover"),n=jQuery("#skin-dz-br-wrap .eg-element-cover");e.removeClass().addClass("eg-element-cover"),t.removeClass().addClass("eg-element-cover"),n.removeClass().addClass("eg-element-cover"),e.removeAttr("data-delay"),t.removeAttr("data-delay"),n.removeAttr("data-delay"),e.data("delay",null),t.data("delay",null),n.data("delay",null),jQuery("#skin-dz-wrapper").removeClass().addClass("esg-"+jQuery('select[name="cover-group-animation"] option:selected').val()),jQuery("#skin-dz-media-bg").removeClass().addClass("esg-"+jQuery('select[name="media-animation"] option:selected').val()),jQuery("#skin-dz-wrapper").attr("data-delay",parseInt(jQuery('input[name="cover-group-animation-delay"]').val())/100),jQuery("#skin-dz-media-bg").attr("data-delay",parseInt(jQuery('input[name="media-animation-delay"]').val())/100),jQuery("#skin-dz-wrapper").data("delay",parseInt(jQuery('input[name="cover-group-animation-delay"]').val())/100),jQuery("#skin-dz-media-bg").data("delay",parseInt(jQuery('input[name="media-animation-delay"]').val())/100),"full"==jQuery('select[name="cover-type"] option:selected').val()?(e.addClass("esg-"+jQuery('select[name="cover-animation-center"] option:selected').val()+jQuery('select[name="cover-animation-center-type"] option:selected').val()),e.attr("data-delay",parseInt(jQuery('input[name="cover-animation-delay-center"]').val())/100),e.data("delay",parseInt(jQuery('input[name="cover-animation-delay-center"]').val())/100)):(t.addClass("esg-"+jQuery('select[name="cover-animation-top"] option:selected').val()+jQuery('select[name="cover-animation-top-type"] option:selected').val()),e.addClass("esg-"+jQuery('select[name="cover-animation-center"] option:selected').val()+jQuery('select[name="cover-animation-center-type"] option:selected').val()),n.addClass("esg-"+jQuery('select[name="cover-animation-bottom"] option:selected').val()+jQuery('select[name="cover-animation-bottom-type"] option:selected').val()),t.attr("data-delay",parseInt(jQuery('input[name="cover-animation-delay-top"]').val())/100),e.attr("data-delay",parseInt(jQuery('input[name="cover-animation-delay-center"]').val())/100),n.attr("data-delay",parseInt(jQuery('input[name="cover-animation-delay-bottom"]').val())/100),t.data("delay",parseInt(jQuery('input[name="cover-animation-delay-top"]').val())/100),e.data("delay",parseInt(jQuery('input[name="cover-animation-delay-center"]').val())/100),n.data("delay",parseInt(jQuery('input[name="cover-animation-delay-bottom"]').val())/100))},p.refresh_predefined_elements=function(e){if(void 0===e)AdminEssentials.ajaxRequest("get_predefined_elements",{},"",function(e){p.refreshInitElements(e.data.elements),p.refresh_item_layout_elements(e.data.html),p.propagate_default_element_styles(),p.propagate_element_selector()});else{for(var t in h)if(e==t){delete h.handle;break}r.esredraw()}},p.refresh_item_layout_elements=function(e){jQuery(".mainul").html(""),jQuery(".mainul").html(e)},p.check_content_position=function(){var e=jQuery('select[name="show-content"] option:selected').val();jQuery("#skin-dz-m-wrap").show(),"none"==e?jQuery("#skin-dz-m-wrap").hide():"bottom"==e?jQuery("#skin-dz-m-wrap").appendTo(jQuery("#eg-dz-hover-wrap")):"top"==e&&jQuery("#skin-dz-m-wrap").prependTo(jQuery("#eg-dz-hover-wrap"))},p.set_absolute_positioning=function(){jQuery("#skin-dz-wrapper>.skin-dz-elements").draggable({containment:".eg-editor-inside-wrapper",drag:function(){jQuery(this).css({bottom:"auto",right:"auto"})}}),jQuery("#skin-dz-wrapper>.skin-dz-elements").on("dragstop",function(e,t){g.data("id")!==jQuery(this).data("id")&&p.select_layer(jQuery(this).data("id")),p.calculate_absolute_positioning(jQuery(this))})},p.calculate_absolute_positioning=function(e){var t=jQuery('input[name="element-top-bottom"]'),n=jQuery('input[name="element-left-right"]'),a=jQuery('select[name="element-absolute-unit"] option:selected').val(),s=(jQuery("#eg-dz-padding-wrapper").width(),jQuery("#eg-dz-padding-wrapper").height(),jQuery('select[name="element-align"] option:selected').val()),r=jQuery("#skin-dz-media-bg"),i=r.width(),l=r.height(),o=e.position().top,u=e.position().left,c=i-e.position().left-e.outerWidth(!0),d=l-e.position().top-e.outerHeight(!0);switch("%"==a&&(o=o/l*100,u=u/i*100,c=c/i*100,d=d/l*100),s){case"t_l":t.val(o),n.val(u);break;case"t_r":t.val(o),n.val(c);break;case"b_l":t.val(d),n.val(u);break;case"b_r":t.val(d),n.val(c)}p.setting_has_changed()},p.set_default_elements_draggable=function(){jQuery("#skin-dz-tl, #skin-dz-br, #skin-dz-c, #skin-dz-m, .skin-dz-elements, .eg-special-element, .eg-additional-element").disableSelection(),jQuery(".mainul .skin-dz-elements, .eg-special .eg-special-element, .eg-additional-element").draggable({connectToSortable:"#skin-dz-tl,#skin-dz-br,#skin-dz-c,#skin-dz-m",helper:"clone",revert:!1,appendTo:"#eg-wrap",drag:function(){AdminEssentials.whileDropOrSort(".skin-dz-elements.ui-draggable-dragging")},stop:function(){AdminEssentials.atDropStop()}}),jQuery(".eg-trashdropzone").droppable({accept:".mainul .skin-dz-elements",hoverClass:"eg-trashdropzone-hover",drop:function(e,t){if(confirm(eg_lang.really_delete_element_permanently)){var n={handle:t.draggable.data("handle")};AdminEssentials.ajaxRequest("delete_predefined_elements",n,".eg-trashdropzone",function(e){jQuery(t.draggable).closest("li").remove(),p.refresh_predefined_elements(t.draggable.data("handle"))})}}}),p.set_absolute_positioning(),jQuery(".drop-to-stylechange").droppable({accept:".mainul .skin-dz-elements",hoverClass:"eg-trashdropzone-hover",drop:function(e,t){if(null==g)return!1;var n={},a=t.draggable.data("handle");for(var s in h)if(s==a){n=jQuery.extend({},h[s].settings);break}var r=g.data("id");if(!jQuery.isEmptyObject(n))for(var i in j)if(j[i].id==r){for(var s in f)"idle"==f[s].style&&void 0!==n[s]&&(j[i].settings[s]=n[s],"multi-text"==f[s].type&&(void 0===n[s+"-unit"]&&(n[s+"-unit"]="px"),j[i].settings[s+"-unit"]=n[s+"-unit"]));p.select_layer(r),p.setting_has_changed();break}}})},p.redraw_container_height=function(){var e=jQuery("#eg-element-centerme-c"),t=jQuery("#skin-dz-wrapper");e.css({top:Math.round((t.height()-e.height())/2)+"px"})},p.redraw_container_width=function(){var e=jQuery("#eg-dz-hover-wrap"),t=400-parseInt(e.css("paddingLeft"),0)-parseInt(e.css("paddingRight"),0)-parseInt(e.css("borderLeftWidth"),0)-parseInt(e.css("borderRightWidth"),0);e.css("width",t),jQuery("#skin-dz-wrapper, #skin-dz-video-wrapper, #skin-dz-music-wrapper, #skin-dz-media-bg-wrapper").css("width",t)},p.change_bg_color=function(){var e=jQuery("#container-background-color"),t=e.attr("data-color")||e.val(),n=jQuery('select[name="cover-background-size"] option:selected').val(),a=jQuery('select[name="cover-background-repeat"] option:selected').val(),s="0"!=jQuery('input[name="cover-background-image"]').val()?jQuery('input[name="cover-background-image-url"]').val():"";jQuery(".esg-cc .eg-element-cover").css("background-color","transparent"),jQuery(".esg-tc .eg-element-cover").css("background-color","transparent"),jQuery(".esg-bc .eg-element-cover").css("background-color","transparent"),jQuery(".esg-cc .eg-element-cover").css("background-image",""),jQuery(".esg-tc .eg-element-cover").css("background-image",""),jQuery(".esg-bc .eg-element-cover").css("background-image",""),null==t&&(t="transparent"),"full"==jQuery('select[name="cover-type"] option:selected').val()?(jQuery(".esg-cc .eg-element-cover").css("background",t),""!==s&&jQuery(".esg-cc .eg-element-cover").css("background-image","url("+s+")"),jQuery(".esg-cc .eg-element-cover").css("background-size",n),jQuery(".esg-cc .eg-element-cover").css("background-repeat",a)):(jQuery.trim(jQuery("#skin-dz-c").html())&&(jQuery(".esg-cc .eg-element-cover").css("background",t),""!==s&&jQuery(".esg-cc .eg-element-cover").css("background-image","url("+s+")"),jQuery(".esg-cc .eg-element-cover").css("background-size",n),jQuery(".esg-cc .eg-element-cover").css("background-repeat",a)),jQuery.trim(jQuery("#skin-dz-tl").html())&&(jQuery(".esg-tc .eg-element-cover").css("background",t),""!==s&&jQuery(".esg-tc .eg-element-cover").css("background-image","url("+s+")"),jQuery(".esg-tc .eg-element-cover").css("background-size",n),jQuery(".esg-tc .eg-element-cover").css("background-repeat",a)),jQuery.trim(jQuery("#skin-dz-br").html())&&(""!==s?(jQuery(".esg-bc .eg-element-cover").css("background-image","url("+s+")"),jQuery(".esg-bc .eg-element-cover").css("background-size",n),jQuery(".esg-bc .eg-element-cover").css("background-repeat",a)):jQuery(".esg-bc .eg-element-cover").css("background",t))),jQuery("#eg-elements-container-grid ul").css("background",t),jQuery(".eg-pa-coverring").css("background",t)},jQuery(".drop-to-stylereset").click(function(){if(null==g)return!1;var e=g.data("id");for(var t in j)if(j[t].id==e){for(var n in f){var a=n.replace("-hover","");"hover"==f[n].style&&("checkbox"==f[n].type?j[t].settings[n]=j[t].settings[a]:"select"==f[n].type?(j[t].settings[n]=j[t].settings[a],"background-size"==n&&(delete j[t].settings["background-size-x-hover"],delete j[t].settings["background-size-y-hover"],"%"==j[t].settings[a]&&(j[t].settings["background-size-x-hover"]=j[t].settings["element-background-size-x"],j[t].settings["background-size-y-hover"]=j[t].settings["element-background-size-y"]))):(f[n].type,j[t].settings[n]=j[t].settings[a]),void 0!==j[t].settings[a+"-unit"]&&(j[t].settings[a+"-unit-hover"]=j[t].settings[a+"-unit"]))}p.set_default_values(e),p.set_setting_values(),p.setting_has_changed(),AdminEssentials.presetSelects();break}}),p.initGridEditor=function(a){var n;window.onbeforeunload=function(e){if(d){var t=eg_lang.leave_not_saved;return(e=e||window.event)&&(e.returnValue=t),t}},jQuery('input[name="element-font-family"]').autocomplete({source:l,minLength:0}),jQuery('input[name="element-font-family-hover"]').autocomplete({source:l,minLength:0}),jQuery('input[name="element-source-meta"]').autocomplete({source:u,minLength:0}),jQuery(".ar-meta-field").autocomplete({source:u,minLength:0}),jQuery('input[name="element-meta-link"]').autocomplete({source:u,minLength:0}),jQuery('input[name="link-meta-link"]').autocomplete({source:u,minLength:0}),jQuery('input[name="element-font-family"]').bind("autocompleteopen",function(){jQuery(this).data("is_open",!0)}),jQuery('input[name="element-font-family"]').bind("autocompleteclose",function(){jQuery(this).data("is_open",!1)}),jQuery('input[name="element-font-family"]').bind("autocompletechange",function(){p.setting_has_changed()}),jQuery('input[name="element-font-family-hover"]').bind("autocompleteopen",function(){jQuery(this).data("is_open",!0)}),jQuery('input[name="element-font-family-hover"]').bind("autocompleteclose",function(){jQuery(this).data("is_open",!1)}),jQuery('input[name="element-font-family-hover"]').bind("autocompletechange",function(){p.setting_has_changed()}),jQuery(".ar-meta-field").bind("autocompleteopen",function(){jQuery(this).data("is_open",!0)}),jQuery(".ar-meta-field").bind("autocompleteclose",function(){jQuery(this).data("is_open",!1)}),jQuery('input[name="element-source-meta"]').bind("autocompleteopen",function(){jQuery(this).data("is_open",!0)}),jQuery('input[name="element-source-meta"]').bind("autocompleteclose",function(){jQuery(this).data("is_open",!1)}),jQuery('input[name="element-source-meta"]').bind("autocompletechange",function(){p.setting_has_changed()}),jQuery('input[name="element-meta-link"]').bind("autocompleteopen",function(){jQuery(this).data("is_open",!0)}),jQuery('input[name="element-meta-link"]').bind("autocompleteclose",function(){jQuery(this).data("is_open",!1)}),jQuery('input[name="element-meta-link"]').bind("autocompletechange",function(){p.setting_has_changed()}),jQuery('input[name="link-meta-link"]').bind("autocompleteopen",function(){jQuery(this).data("is_open",!0)}),jQuery('input[name="link-meta-link"]').bind("autocompleteclose",function(){jQuery(this).data("is_open",!1)}),jQuery('input[name="link-meta-link"]').bind("autocompletechange",function(){p.setting_has_changed()}),jQuery("#button-open-font-family").click(function(e){e.stopPropagation(),1==jQuery('input[name="element-font-family"]').data("is_open")?jQuery('input[name="element-font-family"]').autocomplete("close"):jQuery('input[name="element-font-family"]').autocomplete("search","").data("ui-autocomplete")}),jQuery("#button-open-font-family-hover").click(function(e){e.stopPropagation(),1==jQuery('input[name="element-font-family-hover"]').data("is_open")?jQuery('input[name="element-font-family-hover"]').autocomplete("close"):jQuery('input[name="element-font-family-hover"]').autocomplete("search","").data("ui-autocomplete")}),jQuery("#button-open-meta-key").click(function(e){e.stopPropagation(),1==jQuery('input[name="element-source-meta"]').data("is_open")?jQuery('input[name="element-source-meta"]').autocomplete("close"):jQuery('input[name="element-source-meta"]').autocomplete("search","").data("ui-autocomplete")}),jQuery("#button-open-link-meta-key").click(function(e){e.stopPropagation(),1==jQuery('input[name="element-meta-link"]').data("is_open")?jQuery('input[name="element-meta-link"]').autocomplete("close"):jQuery('input[name="element-meta-link"]').autocomplete("search","").data("ui-autocomplete")}),jQuery(".ar-open-meta").click(function(e){if("disabled"!=jQuery(this).attr("disabled")){e.stopPropagation(),1==jQuery(this).closest("tr").find(".ar-meta-field").data("is_open")?jQuery(this).closest("tr").find(".ar-meta-field").autocomplete("close"):jQuery(this).closest("tr").find(".ar-meta-field").autocomplete("search","").data("ui-autocomplete");var t=jQuery(".ui-autocomplete");for(var n in t)t.hasOwnProperty(n)&&"object"==typeof t[n]&&"style"in t[n]&&t[n].style.setProperty("z-index","999999","important")}}),jQuery("#button-open-link-link-meta-key").click(function(e){e.stopPropagation(),1==jQuery('input[name="link-meta-link"]').data("is_open")?jQuery('input[name="link-meta-link"]').autocomplete("close"):jQuery('input[name="link-meta-link"]').autocomplete("search","").data("ui-autocomplete")}),jQuery("body").click(function(){jQuery('input[name="element-font-family"]').autocomplete("close"),jQuery('input[name="element-font-family-hover"]').autocomplete("close"),jQuery('input[name="element-source-meta"]').autocomplete("close"),jQuery('input[name="element-meta-link"]').autocomplete("close"),jQuery('input[name="link-meta-link"]').autocomplete("close"),jQuery(".ar-meta-field").autocomplete("close")}),jQuery("#dialog-eg-fakeicon-in").click(function(){jQuery("#eg-fontello-icons-dialog-wrap").dialog("close");var e=jQuery("#dialog-eg-fakeicon-in i").attr("class");jQuery('input[name="element-source-icon"]').val(e),jQuery("#eg-preview-icon").html('<i class="'+e+'"></i>')}),jQuery(".eg-icon-chooser").on("mouseenter",function(){var e=jQuery(this),t=jQuery("#dialog-eg-fakeicon-in");t.data("lastovered",e);var n=e.attr("class").replace("eg-icon-chooser ","");t.html('<i class="'+n+'"></i>'),punchgs.TweenLite.fromTo(t,.3,{top:e.position().top-8,left:e.position().left-10,scale:0,transformPerspective:600,transformOrigin:"50% 50%",autoAlpha:0},{scale:1,ease:punchgs.Power3.easeout,autoAlpha:1})}),jQuery("#dialog-eg-fakeicon-in").on("mouseleave",function(){var e=jQuery("#dialog-eg-fakeicon-in");punchgs.TweenLite.fromTo(e.data("lastovered"),.2,{scale:1.3,transformPerspective:600,transformOrigin:"50% 50%"},{scale:1,ease:punchgs.Power3.easeout})}),jQuery(".eg-add-meta-to-textarea").click(function(){jQuery("#meta-dialog-wrap").dialog("close");var e=jQuery(this).find("td:first-child").text();jQuery('textarea[name="element-source-text"]').val(jQuery('textarea[name="element-source-text"]').val()+e)}),jQuery("#show-fontello-dialog").click(function(){jQuery("#eg-fontello-icons-dialog-wrap").css("overflow","auto").dialog({modal:!0,draggable:!1,resizable:!1,width:700,height:580,title:eg_lang.fontello_icons,closeOnEscape:!0,dialogClass:"wp-dialog"})}),jQuery("#eg-show-meta-keys-dialog").click(function(){jQuery("#meta-dialog-wrap").dialog({modal:!0,draggable:!1,resizable:!1,width:632,height:565,closeOnEscape:!0,dialogClass:"wp-dialog"})}),jQuery("#esg-advanced-rules-edit").click(function(){if(null==g)return!1;jQuery("#advanced-rules-dialog-wrap").dialog({modal:!0,draggable:!1,resizable:!1,width:690,height:565,closeOnEscape:!1,buttons:[{text:eg_lang.save_rules,click:function(){var e=AdminEssentials.getFormParams("ar-form-wrap"),t=g.data("id");for(var n in j)if(j[n].id==t){j[n].settings["adv-rules"]=e;break}jQuery(this).dialog("close")}},{text:eg_lang.reset_fields,click:function(){confirm(eg_lang.really_reset_fields)&&(document.getElementById("ar-form-wrap").reset(),jQuery(".ar-type-field").each(function(){jQuery(this).change()}),jQuery(".ar-operator-field").each(function(){jQuery(this).change()}))}},{text:eg_lang.discard_changes,click:function(){confirm(eg_lang.really_discard_changes)&&jQuery(this).dialog("close")}}],dialogClass:"wp-dialog"}),document.getElementById("ar-form-wrap").reset(),jQuery(".ar-type-field").each(function(){jQuery(this).change()}),jQuery(".ar-operator-field").each(function(){jQuery(this).change()});var e=g.data("id");for(var t in jQuery('.ar-show-field[value="show"]').attr("checked","checked"),j)if(j[t].id==e){if(void 0!==j[t].settings["adv-rules"])for(var n in j[t].settings["adv-rules"])if("ar-show"==n)jQuery("."+n+'-field[value="'+j[t].settings["adv-rules"][n]+'"]').attr("checked","checked");else{var a=0;jQuery("."+n+"-field").each(function(){jQuery(this).val(j[t].settings["adv-rules"][n][a]),a++})}break}jQuery(".ar-type-field").each(function(){jQuery(this).change()}),jQuery(".ar-operator-field").each(function(){jQuery(this).change()})}),jQuery("body").on("change",".ar-type-field",function(){if("meta"==jQuery(this).val())jQuery(this).closest("tr").find(".ar-meta-field").attr("disabled",!1),jQuery(this).closest("tr").find(".ar-open-meta").attr("disabled",!1),jQuery(this).closest("tr").find(".ar-value-field").attr("disabled",!1),jQuery(this).closest("tr").find(".ar-opt-meta").each(function(){jQuery(this).attr("disabled",!1)});else{jQuery(this).closest("tr").find(".ar-meta-field").attr("disabled","disabled"),jQuery(this).closest("tr").find(".ar-open-meta").attr("disabled","disabled"),jQuery(this).closest("tr").find(".ar-value-field").attr("disabled","disabled"),jQuery(this).closest("tr").find(".ar-opt-meta").each(function(){jQuery(this).attr("disabled","disabled")});var e=jQuery(this).closest("tr").find(".ar-operator-field option:selected").val();"isset"!==e&&"empty"!==e&&jQuery(this).closest("tr").find('.ar-operator-field option[value="isset"]').attr("selected","selected")}var t=jQuery(this).attr("id");"off"==jQuery(this).val()?jQuery("#"+t+"-logic").attr("disabled","disabled"):jQuery("#"+t+"-logic").attr("disabled",!1)}),jQuery("body").on("change",".ar-operator-field",function(){"between"==jQuery(this).val()?jQuery(this).closest("tr").find('input[name="ar-value-2[]"]').attr("disabled",!1):jQuery(this).closest("tr").find('input[name="ar-value-2[]"]').attr("disabled","disabled")}),jQuery("#eg-global-css-dialog").click(function(){jQuery("#global-css-edit-dialog-wrap").dialog({modal:!0,draggable:!1,resizable:!1,width:632,height:565,closeOnEscape:!0,buttons:[{text:eg_lang.apply_changes,click:function(){var e={global_css:i.getValue()};AdminEssentials.ajaxRequest("update_custom_css",e,".ui-button",function(e){p.set_global_inline_styles(),jQuery("#global-css-edit-dialog-wrap").dialog("close")})}}],dialogClass:"wp-dialog"}),i.refresh()}),(i=CodeMirror.fromTextArea(document.getElementById("eg-global-css-editor"),{lineNumbers:!0})).setSize(632,482),p.change_font_list=function(){var e=[];if(e.push("Georgia, serif"),e.push('"Palatino Linotype", "Book Antiqua", Palatino, serif'),e.push('"Times New Roman", Times, serif'),e.push("Arial, Helvetica, sans-serif"),e.push('"Arial Black", Gadget, sans-serif'),e.push('"Comic Sans MS", cursive, sans-serif'),e.push("Impact, Charcoal, sans-serif"),e.push('"Lucida Sans Unicode", "Lucida Grande", sans-serif'),e.push("Tahoma, Geneva, sans-serif"),e.push('"Trebuchet MS", Helvetica, sans-serif'),e.push("Verdana, Geneva, sans-serif"),e.push('"Courier New", Courier, monospace'),e.push('"Lucida Console", Monaco, monospace'),jQuery(".eg-google-font-link").remove(),o&&0<o.length)for(var t in o){var n=o[t].url;void 0!==n&&(n=(n=n.split("+").join(" ")).split(":"),e.push('"'+n[0]+'"'))}l=e,jQuery('input[name="element-font-family"]').autocomplete("option","source",l),jQuery('input[name="element-font-family-hover"]').autocomplete("option","source",l)},p.change_font_list(),jQuery('input[name="choose-layout"]').change(function(){"even"==jQuery(this).val()?(jQuery("#eg-show-ratio").show(),jQuery("#skin-dz-m-wrap").hide(),jQuery('select[name="show-content"] option').each(function(){"bottom"==jQuery(this).val()&&jQuery(this).text(eg_lang.bottom_on_hover),"top"==jQuery(this).val()&&jQuery(this).text(eg_lang.top_on_hover),"none"==jQuery(this).val()&&jQuery(this).text(eg_lang.hidden)})):(jQuery("#eg-show-ratio").hide(),jQuery("#skin-dz-m-wrap").show(),jQuery('select[name="show-content"] option').each(function(){"bottom"==jQuery(this).val()&&jQuery(this).text(eg_lang.bottom),"top"==jQuery(this).val()&&jQuery(this).text(eg_lang.top),"none"==jQuery(this).val()&&jQuery(this).text(eg_lang.hide)})),jQuery('select[name="show-content"]').parent().find(".select_fake>span").text(jQuery('select[name="show-content"] option:selected').text()),p.check_content_position(),p.resize_item_skin_preview()}),jQuery('select[name="show-content"]').change(function(){p.check_content_position()}),jQuery('select[name="show-content"] option:selected').change(),jQuery('select[name="content-align"]').change(function(){jQuery("#skin-dz-m").css("textAlign",jQuery(this).val())}),jQuery('select[name="content-align"] option:selected').change(),jQuery('input[name="choose-layout"]:checked').change(),jQuery("#element-settings-current-name").change(function(){var e=jQuery(this).val();p.select_layer(e)}),jQuery('select[name="cover-animation-top"], select[name="cover-animation-bottom"], select[name="cover-animation-center"], select[name="cover-group-animation"], select[name="media-animation"], select[name="cover-animation-top-type"], select[name="cover-animation-bottom-type"], select[name="cover-animation-center-type"]').change(function(){p.add_animation_classes()}),jQuery('select[name="cover-type"]').change(function(){"full"==jQuery(this).val()?(jQuery("#eg-cover-animation-top").css("display","none"),jQuery("#eg-cover-animation-bottom").css("display","none"),jQuery("#eg-cover-animation-center-hide").css("display","none"),jQuery("#eg-dz-hover-wrap").addClass("eg-full-layout"),jQuery("#skin-dz-c-wrap .eg-element-cover").prependTo("#skin-dz-c-wrap")):(jQuery("#eg-cover-animation-top").css("display","block"),jQuery("#eg-cover-animation-bottom").css("display","block"),jQuery("#eg-cover-animation-center-hide").css("display","block"),jQuery("#eg-dz-hover-wrap").removeClass("eg-full-layout"),jQuery("#skin-dz-c-wrap .eg-element-cover").prependTo("#eg-element-centerme-c")),p.add_animation_classes(),p.change_bg_color()}),jQuery('select[name="cover-type"] option:selected').change(),p.add_animation_classes(),jQuery('select[name="element-transition"]').change(function(){p.check_no_transition(this.options[this.selectedIndex].value)}),p.check_no_transition=function(e){var t="none"!==e?"show":"hide";jQuery(".eg-hideable-no-transition")[t]()},jQuery('select[name="element-align"]').change(function(){switch(jQuery('select[name="element-align"] option:selected').val()){case"t_l":jQuery("#eg-t_b_align").text(eg_lang.top),jQuery("#eg-l_r_align").text(eg_lang.left);break;case"t_r":jQuery("#eg-t_b_align").text(eg_lang.top),jQuery("#eg-l_r_align").text(eg_lang.right);break;case"b_l":jQuery("#eg-t_b_align").text(eg_lang.bottom),jQuery("#eg-l_r_align").text(eg_lang.left);break;case"b_r":jQuery("#eg-t_b_align").text(eg_lang.bottom),jQuery("#eg-l_r_align").text(eg_lang.right)}p.calculate_absolute_positioning(g)}),jQuery('select[name="element-absolute-unit"]').change(function(){p.calculate_absolute_positioning(g)}),jQuery("#skin-dz-tl, #skin-dz-br, #skin-dz-c, #skin-dz-m").sortable({connectWith:"#skin-dz-tl,#skin-dz-br,#skin-dz-c,#skin-dz-m",revert:!0,tolerance:"pointer",distance:15,grid:[2,2],placeholder:"eg-state-highlight",stack:"#eg-dz-hover-wrap",cancel:".dropzonetext, .eg-element-cover",opacity:.8,zIndex:1e3,sort:function(){AdminEssentials.whileDropOrSort(".skin-dz-elements.ui-sortable-helper"),p.redraw_container_height(),AdminEssentials.atDropStop(1)},update:function(e,t){},beforeStop:function(e,t){},stop:function(e,t){AdminEssentials.atDropStop(),void 0!==t.item.data("id")?p.select_layer(t.item.data("id")):g=t.item,g.removeClass("ui-draggable"),p.update_layers(),p.change_bg_color(),p.redraw_container_height(),p.setting_has_changed()}}),jQuery("body").on("click","#layertotop",function(){var e=jQuery(".skin-dz-elements.selected");e.prev().hasClass("eg-element-cover")||e.insertBefore(e.prev()),p.update_layers(),p.change_bg_color(),p.redraw_container_height(),p.setting_has_changed()}),jQuery("body").on("click","#layertobottom",function(){var e=jQuery(".skin-dz-elements.selected");e.insertAfter(e.next()),p.update_layers(),p.change_bg_color(),p.redraw_container_height(),p.setting_has_changed()}),p.set_default_elements_draggable(),jQuery("body").on("click","#eg-dz-hover-wrap .skin-dz-elements",function(){if(null!=g){if(g.data("id")==jQuery(this).data("id"))return!0;p.setting_has_changed()}p.select_layer(jQuery(this).data("id"))}),jQuery("#settings-dz-elements-wrapper").tabs();var e={color:!0,change:function(e,t){clearTimeout(n),n=setTimeout(function(){p.setting_has_changed()},10)},wrapper:'<span class="rev-colorpickerspan"></span>'},t="undefined"!=typeof RevColor?"tpColorPicker":"wpColorPicker";jQuery("#element-background-color")[t](e),jQuery("#element-color")[t](e),jQuery("#element-border-color")[t](e),jQuery("#element-shadow-color")[t](e),jQuery("#element-background-color-hover")[t](e),jQuery("#element-color-hover")[t](e),jQuery("#element-border-color-hover")[t](e),jQuery("#element-shadow-color-hover")[t](e);var s={color:!0,change:function(e,t){clearTimeout(n),n=setTimeout(function(){p.container_setting_has_changed()},10)},wrapper:'<span class="rev-colorpickerspan"></span>'};jQuery("#full-border-color")[t](s),jQuery("#full-bg-color")[t](s),jQuery("#content-border-color")[t](s),jQuery("#content-shadow-color")[t](s),jQuery("#content-bg-color")[t](s),jQuery("#container-background-color")[t]({color:!0,change:function(e,t){"undefined"==typeof RevColor&&jQuery(this).val(t.color.toString()),p.change_bg_color()},wrapper:'<span class="rev-colorpickerspan"></span>'}),jQuery('#container-background-color, input[name="container-background-color-into"]').change(function(){p.change_bg_color()}),jQuery("#container-background-color").change(),p.init_slider_elements(),p.setting_has_changed=function(){p.get_setting_values(),p.set_setting_styles(),p.set_setting_caption(),p.set_setting_attributes(),p.change_bg_color(),p.propagate_element_selector(),p.redraw_container_height(),AdminEssentials.atDropStop()},p.container_setting_has_changed=function(){p.set_full_styles(),p.set_content_styles(),p.redraw_container_height(),p.redraw_container_width(),AdminEssentials.atDropStop(),p.set_shadow_on_container(),p.change_bg_color()},p.set_full_styles=function(){var e=jQuery("#eg-dz-hover-wrap"),t=[],n=[],a="";jQuery('input[name="full-border[]"]').each(function(){t.push(parseInt(jQuery(this).val()))}),jQuery('input[name="full-border-radius[]"]').each(function(){n.push(parseInt(jQuery(this).val()))}),jQuery('input[name="full-padding[]"]').each(function(){a+=jQuery(this).val()+"px "}),e.css("borderTopWidth",t[0]+"px"),e.css("borderRightWidth",t[1]+"px"),e.css("borderBottomWidth",t[2]+"px"),e.css("borderLeftWidth",t[3]+"px"),e.css("borderTopLeftRadius",n[0]+"px"),e.css("borderTopRightRadius",n[1]+"px"),e.css("borderBottomRightRadius",n[2]+"px"),e.css("borderBottomLeftRadius",n[3]+"px"),e.css("padding",a);var s=jQuery("#full-bg-color"),r=jQuery("#full-border-color");e.css("background",s.attr("data-color")||s.val()),e.css("borderColor",r.attr("data-color")||r.val()),e.css("borderStyle",jQuery('select[name="full-border-style"] option:selected').val())},p.set_shadow_on_container=function(){var e=jQuery('select[name="all-shadow-used"] option:selected').val(),t=jQuery("#eg-dz-hover-wrap"),n=jQuery("#skin-dz-m-wrap"),a=jQuery("#skin-dz-wrapper"),s="";if(t.css("-moz-box-shadow","").css("-webkit-box-shadow","").css("box-shadow",""),n.css("-moz-box-shadow","").css("-webkit-box-shadow","").css("box-shadow",""),a.css("-moz-box-shadow","").css("-webkit-box-shadow","").css("box-shadow",""),"none"==e)return!0;jQuery('input[name="content-box-shadow[]"]').each(function(){s+=jQuery(this).val()+"px "});var r=jQuery("#content-shadow-color");r=r.attr("data-color")||r.val(),s+=r,"both"==e?t.css("-moz-box-shadow",s).css("-webkit-box-shadow",s).css("box-shadow",s):"content"==e?n.css("-moz-box-shadow",s).css("-webkit-box-shadow",s).css("box-shadow",s):"media"==e&&a.css("-moz-box-shadow",s).css("-webkit-box-shadow",s).css("box-shadow",s)},p.set_content_styles=function(){var e=jQuery("#skin-dz-m"),t=[],n=[],a="";jQuery('input[name="content-border[]"]').each(function(){t.push(parseInt(jQuery(this).val()))}),jQuery('input[name="content-border-radius[]"]').each(function(){n.push(parseInt(jQuery(this).val()))}),jQuery('input[name="content-padding[]"]').each(function(){a+=jQuery(this).val()+"px "}),e.css("borderTopWidth",t[0]+"px"),e.css("borderRightWidth",t[1]+"px"),e.css("borderBottomWidth",t[2]+"px"),e.css("borderLeftWidth",t[3]+"px"),e.css("borderTopLeftRadius",n[0]+"px"),e.css("borderTopRightRadius",n[1]+"px"),e.css("borderBottomRightRadius",n[2]+"px"),e.css("borderBottomLeftRadius",n[3]+"px"),e.css("padding",a);var s=jQuery("#content-bg-color"),r=jQuery("#content-border-color");e.css("background",s.attr("data-color")||s.val()),e.css("borderColor",r.attr("data-color")||r.val()),e.css("borderStyle",jQuery('select[name="content-border-style"] option:selected').val())},jQuery("body").on("click","#element-delete-button",function(){if(null==g)return!1;confirm(eg_lang.delete_this_element)&&p.delete_layer(g)}),jQuery('select[name="element-source"]').change(function(){switch(jQuery(".elements-select-wrap").hide().siblings(".select_fake").hide(),jQuery(".esg-cat-tag-settings").hide(),jQuery("#eg-source-functonality-wrap").hide().find(".select_fake").hide(),jQuery("#eg-source-meta-wrap").hide(),jQuery("#eg-source-taxonomy-wrap").hide(),jQuery(this).val()){case"event":jQuery("#eg-source-element-drops").show(),jQuery('select[name="element-source-event"]').show().siblings(".select_fake").show(),jQuery("#eg-source-limit-wrap").show();break;case"woocommerce":jQuery("#eg-source-element-drops").show(),jQuery('select[name="element-source-woocommerce"]').show().siblings(".select_fake").show(),jQuery("#eg-source-limit-wrap").show(),jQuery('select[name="element-source-woocommerce"]').change();break;case"icon":jQuery("#eg-source-element-drops").hide(),jQuery("#eg-source-icon-wrap").show();break;case"text":jQuery("#eg-source-element-drops").hide();var e=!1;for(var t in j)if(j[t].id==g.data("id")){e=!0;var n=j[t];void 0!==typeof n&&null!==n&&void 0!==typeof n.settings.special&&"true"==n.settings.special&&void 0!==typeof n.settings["special-type"]&&"blank-element"==n.settings["special-type"]?jQuery("#eg-source-text-style-disable-wrap").hide():jQuery("#eg-source-text-style-disable-wrap").show()}!1===e&&jQuery("#eg-source-text-style-disable-wrap").show(),jQuery("#eg-source-text-wrap").show();break;case"post":default:jQuery("#eg-source-element-drops").show();var a=jQuery('select[name="element-source-post"]').val();-1===a.search(/cat_list|tag_list/)?jQuery("#eg-source-limit-wrap").show():jQuery("#eg-source-limit-wrap").hide(),"taxonomy"==a&&jQuery("#eg-source-taxonomy-wrap").show(),jQuery("#eg-source-functonality-wrap").show(),jQuery('select[name="element-source-post"]').show().siblings(".select_fake").show(),jQuery('select[name="element-source-function"]').show().siblings(".select_fake").show(),jQuery('select[name="element-source-post"]').change()}}),jQuery('select[name="element-source-post"]').change(function(){var e=jQuery(this).val();"cat_list"==e||"tag_list"==e||"taxonomy"==e?(jQuery(".esg-cat-tag-settings").show(),jQuery("#eg-source-limit-wrap").hide(),jQuery("#eg-source-functonality-wrap").show().find(".select_fake").show()):(jQuery(".esg-cat-tag-settings").hide(),jQuery("#eg-source-limit-wrap").show(),jQuery("#eg-source-functonality-wrap").hide().find(".select_fake").hide()),"meta"==e?jQuery("#eg-source-meta-wrap").show():jQuery("#eg-source-meta-wrap").hide(),"taxonomy"==e?jQuery("#eg-source-taxonomy-wrap").show():jQuery("#eg-source-taxonomy-wrap").hide()}),jQuery('select[name="element-source-woocommerce"]').change(function(){"wc_categories"==jQuery(this).val()?(jQuery(".esg-cat-tag-settings").show(),jQuery("#eg-source-functonality-wrap").show().find(".select_fake").show()):(jQuery(".esg-cat-tag-settings").hide(),jQuery("#eg-source-functonality-wrap").hide().find(".select_fake").hide())}),jQuery('select[name="element-link-type"]').change(function(){switch(jQuery("#eg-element-post-url-wrap").hide(),jQuery("#eg-element-post-meta-wrap").hide(),jQuery("#eg-element-post-javascript-wrap").hide(),jQuery("#eg-element-link-details-wrap").show(),jQuery("#eg-element-facebook-wrap").hide(),jQuery("#eg-element-gplus-wrap").hide(),jQuery("#eg-element-pinterest-wrap").hide(),jQuery("#eg-element-twitter-wrap").hide(),jQuery(this).val()){case"post":case"lightbox":case"embedded_media":break;case"url":jQuery("#eg-element-post-url-wrap").show();break;case"meta":jQuery("#eg-element-post-meta-wrap").show();break;case"javascript":jQuery("#eg-element-post-javascript-wrap").show();break;case"sharefacebook":jQuery("#eg-element-link-details-wrap").hide(),jQuery("#eg-element-facebook-wrap").show(),"custom"==jQuery('select[name="element-facebook-sharing-link"]').val()?jQuery(".eg-element-facebook_link_custom").show():jQuery(".eg-element-facebook_link_custom").hide();break;case"sharegplus":jQuery("#eg-element-link-details-wrap").hide(),jQuery("#eg-element-gplus-wrap").show(),"custom"==jQuery('select[name="element-gplus-sharing-link"]').val()?jQuery(".eg-element-gplus_link_custom").show():jQuery(".eg-element-gplus_link_custom").hide();break;case"sharepinterest":jQuery("#eg-element-link-details-wrap").hide(),jQuery("#eg-element-pinterest-wrap").show(),"custom"==jQuery('select[name="element-pinterest-sharing-link"]').val()?jQuery(".eg-element-pinterest_link_custom").show():jQuery(".eg-element-pinterest_link_custom").hide();break;case"sharetwitter":jQuery("#eg-element-link-details-wrap").hide(),jQuery("#eg-element-twitter-wrap").show(),"custom"==jQuery('select[name="element-twitter-sharing-link"]').val()?jQuery(".eg-element-twitter_link_custom").show():jQuery(".eg-element-twitter_link_custom").hide()}}),jQuery('select[name="link-link-type"]').change(function(){switch(jQuery("#eg-link-post-url-wrap").hide(),jQuery("#eg-link-post-meta-wrap").hide(),jQuery("#eg-link-post-javascript-wrap").hide(),jQuery(this).val()){case"post":case"lightbox":case"embedded_media":break;case"url":jQuery("#eg-link-post-url-wrap").show();break;case"meta":jQuery("#eg-link-post-meta-wrap").show();break;case"javascript":jQuery("#eg-link-post-javascript-wrap").show()}}),jQuery('select[name="link-link-type"] option:selected').change(),jQuery('select[name="link-set-to"]').change(function(){"none"!==jQuery(this).val()?jQuery(".add-link-to-wrapper").show():jQuery(".add-link-to-wrapper").hide()}),jQuery('select[name="link-set-to"] option:selected').change(),jQuery('select[name="element-background-size"]').change(function(){jQuery("#background-size-percent-wrap").hide(),"%"==jQuery(this).val()&&jQuery("#background-size-percent-wrap").css("display","inline-block")}),jQuery('select[name="element-background-size"] option:selected').click(),jQuery('input[name="choose-layout"]:checked').change(),jQuery('select[name="element-display"]').change(function(){switch(jQuery("#element-text-align-wrap").hide(),jQuery("#element-float-wrap").hide(),jQuery(this).val()){case"block":jQuery("#element-text-align-wrap").show(),jQuery('#element-float-wrap option[value="none"]').attr("selected","selected");break;case"inline-block":jQuery("#element-float-wrap").show(),jQuery('#element-text-align-wrap option[value="center"]').attr("selected","selected")}}),jQuery('input[name="element-display"]:checked').change(),jQuery("#eg-styling-idle-hover-tab .eg-submenu li").click(function(){var e=jQuery("#eg-style-idle"),t=jQuery("#eg-style-hover"),n=jQuery(this).data("toshow");e.hide(),t.hide(),jQuery("#"+n).show(),jQuery("#"+n+" .eg-small-vertical-menu li:first-child").click(),jQuery("#eg-styling-idle-hover-tab .eg-submenu li").removeClass("selected-submenu-setting"),jQuery(this).addClass("selected-submenu-setting")}),jQuery("#eg-lc-spaces .eg-submenu li").click(function(){var e=jQuery("#eg-style-full"),t=jQuery("#eg-style-content"),n=jQuery(this).data("toshow");e.hide(),t.hide(),jQuery("#"+n).show(),jQuery("#eg-lc-spaces .eg-submenu li").removeClass("selected-submenu-setting"),jQuery(this).addClass("selected-submenu-setting")}),jQuery("#eg-btn-save-grid-editor, #eg-global-change").click(function(){var e=jQuery('input[name="item-skin-name"]').val();if(e.length<2)return alert(eg_lang.item_name_too_short),!1;var t=p.output_setting_data();t=JSON.stringify(t);var n={name:jQuery.trim(e),params:AdminEssentials.getFormParams("eg-form-item-skin-layout-settings"),layers:t};"update_item_skin"==a&&(n.id=jQuery('input[name="eg-item-skin-id"]').val()),AdminEssentials.ajaxRequest("update_create_item_skin",n,"#eg-btn-save-grid-editor, #eg-global-change"),d=!1}),jQuery('input[name="item-skin-name"]').keyup(function(){if(jQuery("#eg-item-skin-slug").text(AdminEssentials.sanitize_input(jQuery(this).val())),null!==g){var e="text"==jQuery('select[name="element-source"] option:selected').val()&&"checked"==jQuery('input[name="element-source-text-style-disable"]').attr("checked")?"-nostyle":"";jQuery(".eg-element-class-setter").text(eg_lang.class_name+" .eg-"+jQuery("#eg-item-skin-slug").text()+e+"-element-"+g.data("id"))}}),jQuery('input[name="item-skin-name"]').keyup(),jQuery("#element-save-as-button").click(function(){var e=void 0!==jQuery(".skin-dz-elements.selected").data("orighandle")?jQuery(".skin-dz-elements.selected").data("orighandle"):jQuery(".skin-dz-elements.selected").data("handle"),a=prompt(eg_lang.please_enter_unique_element_name,e);return null!=a&&(a.length<2?(alert(eg_lang.item_name_too_short),!1):void AdminEssentials.ajaxRequest("check_item_element_existence",{name:jQuery.trim(a)},".save-wrap-settings, #dz-delete",function(e){var t=!1;if(void 0!==typeof e.data.existence&&("true"==e.data.existence?confirm(eg_lang.element_name_exists_do_overwrite)&&(t=!0):"false"==e.data.existence?t=!0:AdminEssentials.showErrorMessage(e.data.existence,"")),t){var n={settings:AdminEssentials.getFormParams("eg-item-element-settings-wrap"),name:jQuery.trim(a)};AdminEssentials.ajaxRequest("update_create_item_element",n,".save-wrap-settings, #dz-delete",function(e){p.refresh_predefined_elements(),AdminEssentials.showWaitAMinute({fadeOut:300})})}else AdminEssentials.showInfoMessage(eg_lang.element_was_not_changed),AdminEssentials.showWaitAMinute({fadeOut:300})}))}),p.resize_item_skin_preview();r=jQuery("#eg-elements-container-grid").tpessential({layout:"even",row:3,column:5,space:5,aspectratio:"4:3",startAnimation:"none",startAnimationSpeed:0,startAnimationDelay:0,pageAnimation:"fade",overflowoffset:20,animSpeed:500,animDelay:"on",delayBasic:1,responsiveEntries:[{width:400,amount:3},{width:480,amount:4},{width:620,amount:5},{width:768,amount:5},{width:992,amount:6},{width:1200,amount:7},{width:1400,amount:7}]}),jQuery("#eg-preview-item-skin").click(function(){AdminEssentials.playElementAnimation()}),jQuery("#eg-preview-stop-item-skin").click(function(){AdminEssentials.stopElementAnimation()}),p.propagate_default_element_styles(),AdminEssentials.atDropStop(),AdminEssentials.callOnChange("#settings-dz-elements-wrapper",p.setting_has_changed,0),AdminEssentials.callOnChange(".eg-lc-menu-wrapper",p.container_setting_has_changed,0),p.container_setting_has_changed(),AdminEssentials.callOnChange("#eg-curname-event-wrap"),AdminEssentials.presetSelects(),jQuery("#cover-background-image-wrap").click(function(e){e.preventDefault();var t=wp.media({title:eg_lang.choose_image,multiple:!1,library:{type:"image"},button:{text:eg_lang.choose_image}});t.on("select",function(){var e=t.state().get("selection").first().toJSON();t.state().get("selection");p.select_cover_image(e.url,e.id)}),t.open()}),jQuery("#remove-cover-background-image-wrap").click(function(){jQuery('input[name="cover-background-image"]').val("0"),jQuery('input[name="cover-background-image-url"]').val(""),jQuery("#cover-background-image-wrap").css("background-image",""),p.change_bg_color()}),p.select_cover_image=function(e,t){jQuery('input[name="cover-background-image"]').val(t),jQuery('input[name="cover-background-image-url"]').val(e),jQuery("#cover-background-image-wrap").css("background-image","url("+e+")"),p.change_bg_color()},jQuery("#element-hover-image").on("change",function(){var e=this.checked?"block":"none";hov=document.getElementById("eg-hover-img-animation"),hov&&(hov.style.display=e)}),jQuery(document).on("keydown",function(e){if(e.ctrlKey||e.metaKey)switch(String.fromCharCode(e.which).toLowerCase()){case"s":var t=jQuery("#eg-global-change");t.length&&(e.preventDefault(),t.click())}})},p.sortByOrder=function(e,t){return(e=parseInt(e.order.toLowerCase()))<(t=parseInt(t.order.toLowerCase()))?-1:t<e?1:0},p.resize_item_skin_preview=function(){var e=jQuery("#skin-dz-wrapper").width();if("even"==jQuery('input[name="choose-layout"]:checked').val())var t=jQuery('input[name="element-x-ratio"]').val(),n=jQuery('input[name="element-y-ratio"]').val();else t=1,n=1;jQuery("#skin-dz-wrapper").css("height",e/t*n),jQuery("#skin-dz-media-bg").css("height",e/t*n),jQuery("#skin-dz-media-bg-wrapper").css("height",e/t*n)},p.init_slider_elements=function(){for(var e in f)switch(f[e].type){case"text-slider":case"slider":if("shadow"==e)continue;parseInt(f[e].values.default),jQuery("#element-"+e).slider({value:isNaN(parseInt(f[e].values.default))?0:parseInt(f[e].values.default),min:parseInt(f[e].values.min),max:parseInt(f[e].values.max),step:parseInt(f[e].values.step),slide:function(e,t){jQuery('input[name="'+jQuery(this).attr("id")+'"]').val(t.value),jQuery("body").trigger("esgslide",jQuery(this))}});var t=parseInt(jQuery("#element-"+e+" .ui-slider-handle").css("left"),0);jQuery("#element-"+e).prepend('<span class="eg-pre-slider"></span>'),jQuery("#element-"+e+" .eg-pre-slider").css({width:t})}var n=[{name:"x-ratio",value:-1,min:1,max:16},{name:"y-ratio",value:-1,min:1,max:16}];for(var a in n){var s=1;null!=n[a].step&&(s=n[a].step),-1==n[a].value&&(n[a].value=jQuery('input[name="element-'+n[a].name+'"]').val()),jQuery("#element-"+n[a].name).slider({value:n[a].value,min:n[a].min,max:n[a].max,step:s,slide:function(e,t){jQuery('input[name="'+jQuery(this).attr("id")+'"]').val(t.value),jQuery("body").trigger("esgslide",jQuery(this)),"element-x-ratio"!=jQuery(this).attr("id")&&"element-y-ratio"!=jQuery(this).attr("id")||p.resize_item_skin_preview()}});t=parseInt(jQuery("#element-"+n[a].name+" .ui-slider-handle").css("left"),0);jQuery("#element-"+n[a].name).prepend('<span class="eg-pre-slider"></span>'),jQuery("#element-"+n[a].name+" .eg-pre-slider").css({width:t})}jQuery("body").on("esgslide",function(e,t){var n=jQuery(t);setTimeout(function(){var e=parseInt(n.find(".ui-slider-handle").css("left"),0);n.find(".eg-pre-slider").css({width:e})},10)}),jQuery("#element-item-skin-width-check").slider({value:400,min:100,max:1170,step:1,slide:function(e,t){jQuery("#currently-at-pixel").text(t.value+"px"),jQuery("body").trigger("esgslide",jQuery(this)),jQuery("#skin-dz-wrapper").css("width",t.value),jQuery("#skin-dz-media-bg").css("width",t.value),p.resize_item_skin_preview()}});t=parseInt(jQuery("#element-item-skin-width-check .ui-slider-handle").css("left"),0);jQuery("#element-item-skin-width-check").prepend('<span class="eg-pre-slider"></span>'),jQuery("#element-item-skin-width-check .eg-pre-slider").css({width:t}),jQuery("#content-shadow-alpha").slider({value:jQuery('input[name="content-shadow-alpha"]').val(),min:0,max:100,step:1,slide:function(e,t){jQuery('input[name="content-shadow-alpha"]').val(t.value),jQuery("body").trigger("esgslide",jQuery(this))}});t=parseInt(jQuery("#content-shadow-alpha .ui-slider-handle").css("left"),0);jQuery("#content-shadow-alpha").prepend('<span class="eg-pre-slider"></span>'),jQuery("#content-shadow-alpha .eg-pre-slider").css({width:t});n=[{name:"cover-animation-delay-top",value:0,min:0,max:60},{name:"cover-animation-delay-center",value:0,min:0,max:60},{name:"cover-animation-delay-bottom",value:0,min:0,max:60},{name:"cover-group-animation-delay",value:0,min:0,max:60},{name:"media-animation-delay",value:0,min:0,max:60},{name:"hover-image-animation-delay",value:0,min:0,max:60}];for(var a in n){n[a].value=jQuery('input[name="'+n[a].name+'"]').val(),jQuery("#"+n[a].name).slider({value:n[a].value,min:n[a].min,max:n[a].max,step:1,slide:function(e,t){jQuery('input[name="'+jQuery(this).attr("id")+'"]').val(t.value),jQuery("body").trigger("esgslide",jQuery(this)),p.add_animation_classes()}});t=parseInt(jQuery("#"+n[a].name+" .ui-slider-handle").css("left"),0);jQuery("#"+n[a].name).prepend('<span class="eg-pre-slider"></span>'),jQuery("#"+n[a].name+" .eg-pre-slider").css({width:t})}p.reinitSliderPosition(),jQuery("#settings-dz-elements-wrapper>ul>li>a, #layer-settings-header").click(function(){setTimeout(function(){p.reinitSliderPosition()},20)})},p.reinitSliderPosition=function(){jQuery(".eg-pre-slider").each(function(){var e=jQuery(this),t=parseInt(e.parent().find(".ui-slider-handle").css("left"),0);NaN!=t&&null!=t&&e.css({width:t})})},p.initOverviewItemSkin=function(){jQuery(".eg-btn-delete-item-skin").click(function(){var t=jQuery(this).attr("id").replace("eg-delete-",""),e={id:t};confirm(eg_lang.delete_item_skin)&&AdminEssentials.ajaxRequest("delete_item_skin",e,".btn-wrap-item-skin-overview-"+t,function(e){e.success,1==e.success&&jQuery("#eg-delete-"+t).closest("li").remove()})}),jQuery(".eg-btn-duplicate-item-skin").click(function(){var e={id:jQuery(this).attr("id").replace("eg-duplicate-","")};AdminEssentials.ajaxRequest("duplicate_item_skin",e,"")}),jQuery(".eg-btn-star-item-skin").click(function(){var n=jQuery(this).attr("id").replace("eg-star-",""),e={id:n};AdminEssentials.ajaxRequest("star_item_skin",e,"#waitaminute",function(e){var t=jQuery("#eg-star-"+n).children("i");t.hasClass("eg-icon-star-empty")?(t.removeClass("eg-icon-star-empty").addClass("eg-icon-star"),t.closest("li").addClass("filter-favorite")):(t.removeClass("eg-icon-star").addClass("eg-icon-star-empty"),t.closest("li").removeClass("filter-favorite"))})})}};